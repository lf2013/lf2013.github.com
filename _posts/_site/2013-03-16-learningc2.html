<h2 id='id38'>目标</h2>

<p>白话C，最短时间内写出简单C程序. <strong>进阶篇</strong></p>

<h2 id='id39'>关键字</h2>

<ul>
<li>1.数据聚合</li>

<li>2.运算符</li>

<li>3.函数++</li>
</ul>
<hr />
<h5 id='id40'>上期解答<span /></h5>
<div class='highlight'><pre><code class='c'><span class='cp'>#include &lt;stdio.h&gt;</span>
	<span class='kt'>int</span> <span class='nf'>is_prime</span><span class='p'>(</span><span class='kt'>int</span> <span class='n'>x</span><span class='p'>)</span> <span class='c1'>// 1</span>
	<span class='p'>{</span>
		<span class='kt'>int</span> <span class='n'>i</span><span class='p'>;</span>
		<span class='k'>for</span><span class='p'>(</span><span class='n'>i</span> <span class='o'>=</span> <span class='mi'>2</span><span class='p'>;</span><span class='n'>i</span> <span class='o'>*</span> <span class='n'>i</span> <span class='o'>&lt;</span> <span class='n'>x</span><span class='p'>;</span><span class='n'>i</span><span class='o'>++</span><span class='p'>)</span>
			<span class='k'>if</span><span class='p'>((</span><span class='n'>x</span> <span class='o'>%</span> <span class='n'>i</span><span class='p'>)</span> <span class='o'>==</span> <span class='mi'>0</span><span class='p'>)</span> 
				<span class='k'>return</span> <span class='mi'>0</span><span class='p'>;</span>
		<span class='k'>return</span> <span class='mi'>1</span><span class='p'>;</span>
	<span class='p'>}</span>
	<span class='kt'>int</span> <span class='nf'>main</span><span class='p'>()</span> 
	<span class='p'>{</span>
		<span class='kt'>int</span> <span class='n'>i</span><span class='p'>,</span> <span class='n'>count</span><span class='p'>,</span> <span class='n'>sum</span><span class='p'>;</span>
		<span class='k'>for</span><span class='p'>(</span><span class='n'>i</span> <span class='o'>=</span> <span class='mi'>500</span><span class='p'>,</span> <span class='n'>sum</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>,</span> <span class='n'>count</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span><span class='n'>i</span> <span class='o'>&lt;</span> <span class='mi'>1000</span><span class='p'>;</span><span class='n'>i</span><span class='o'>++</span><span class='p'>){</span> <span class='c1'>// 2</span>
			<span class='k'>if</span><span class='p'>(</span><span class='n'>is_prime</span><span class='p'>(</span><span class='n'>i</span><span class='p'>)){</span>
				<span class='n'>count</span><span class='o'>++</span><span class='p'>;</span>		
				<span class='n'>sum</span> <span class='o'>+=</span> <span class='n'>i</span><span class='p'>;</span>
			<span class='p'>}</span>			
		<span class='p'>}</span>
		<span class='n'>printf</span><span class='p'>(</span><span class='s'>&quot;There are %d primes, sum is %d</span><span class='se'>\n</span><span class='s'>&quot;</span><span class='p'>,</span> <span class='n'>count</span><span class='p'>,</span> <span class='n'>sum</span><span class='p'>);</span>
		<span class='k'>return</span> <span class='mi'>0</span><span class='p'>;</span>
	<span class='p'>}</span>
</code></pre></div>
<p>解释两处：1.自己定义的函数<code>is_prime</code>用于判断数的素性; 2.for循环的初始部分有错？？NO!逗号运算符<span /></p>
<hr />
<h4 id='id41'>数据聚合</h4>

<blockquote>
<p>问题：已知每个人的成绩，求每个人与平均分间的差。</p>
</blockquote>

<p>如果只有几个人，可以定义几个变量解决问题。可是若有成百上千的个体，定义变量使用将是多么痛苦。<strong>数组</strong>应运而生，数组是解决同类个体聚合的利器。</p>

<h4 id='_'>数组 <span /></h4>
<div class='highlight'><pre><code class='c'><span class='cp'>#include &lt;stdio.h&gt;</span>
<span class='kt'>int</span> <span class='nf'>main</span><span class='p'>(){</span>
	<span class='kt'>float</span> <span class='n'>scores</span><span class='p'>[</span><span class='mi'>6</span><span class='p'>]</span> <span class='o'>=</span> <span class='p'>{</span><span class='mi'>3</span><span class='p'>,</span> <span class='mi'>4</span><span class='p'>,</span> <span class='mi'>8</span><span class='p'>,</span> <span class='mi'>9</span><span class='p'>,</span> <span class='mi'>5</span><span class='p'>,</span> <span class='mi'>7</span><span class='p'>};</span><span class='c1'>//数组的定义</span>
	<span class='c1'>//float scores[] = {3, 4, 8, 9, 5, 7};也可以 </span>

	<span class='kt'>float</span> <span class='n'>average</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span>
	<span class='kt'>int</span> <span class='n'>i</span><span class='p'>;</span>
	<span class='k'>for</span><span class='p'>(</span><span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span><span class='n'>i</span> <span class='o'>&lt;</span> <span class='mi'>6</span><span class='p'>;</span><span class='n'>i</span><span class='o'>++</span><span class='p'>)</span>
		<span class='n'>average</span> <span class='o'>+=</span> <span class='n'>scores</span><span class='p'>[</span><span class='n'>i</span><span class='p'>];</span>

	<span class='n'>average</span> <span class='o'>/=</span> <span class='mf'>6.0</span><span class='p'>;</span>

	<span class='k'>for</span><span class='p'>(</span><span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span><span class='n'>i</span> <span class='o'>&lt;</span> <span class='mi'>6</span><span class='p'>;</span><span class='n'>i</span><span class='o'>++</span><span class='p'>){</span>
		 <span class='n'>scores</span><span class='p'>[</span><span class='n'>i</span><span class='p'>]</span> <span class='o'>-=</span> <span class='n'>average</span><span class='p'>;</span>
		 <span class='n'>printf</span><span class='p'>(</span><span class='s'>&quot;%f</span><span class='se'>\t</span><span class='s'>&quot;</span><span class='p'>,</span> <span class='n'>scores</span><span class='p'>[</span><span class='n'>i</span><span class='p'>]);</span>
	<span class='p'>}</span>	
<span class='p'>}</span>
</code></pre></div>
<blockquote>
<p>上面解答只针对一门成绩，如果有多门呢？ 建立多个数组？？如果可以把名字，学号成绩合起来定义一种类型，处理将简单，直接。</p>
</blockquote>

<h4 id='_struct'>结构 struct</h4>
<div class='highlight'><pre><code class='c'><span class='cp'>#include &lt;stdio.h&gt;</span>
<span class='kt'>int</span> <span class='nf'>main</span><span class='p'>(){</span>
	<span class='k'>struct</span> <span class='n'>student</span><span class='p'>{</span>		<span class='c1'>//定义结构类型</span>
		<span class='kt'>char</span> <span class='n'>name</span><span class='p'>[</span><span class='mi'>20</span><span class='p'>];</span>		
		<span class='kt'>int</span> <span class='n'>id</span><span class='p'>;</span>
		<span class='kt'>float</span> <span class='n'>score1</span><span class='p'>,</span> <span class='n'>score2</span><span class='p'>;</span>
	<span class='p'>};</span> <span class='c1'>//此处分号不要丢</span>
	<span class='k'>struct</span> <span class='n'>student</span> <span class='n'>s1</span> <span class='o'>=</span> <span class='p'>{</span><span class='s'>&quot;Lili&quot;</span><span class='p'>,</span> <span class='mi'>201006</span><span class='p'>,</span> <span class='mf'>5.5</span><span class='p'>,</span> <span class='mf'>6.6</span><span class='p'>};</span>  <span class='c1'>//定义一个结构变量</span>
	<span class='n'>printf</span><span class='p'>(</span><span class='s'>&quot;name:%s id:%d score:%f %f</span><span class='se'>\n</span><span class='s'>&quot;</span><span class='p'>,</span> <span class='n'>s1</span><span class='p'>.</span><span class='n'>name</span><span class='p'>,</span> <span class='n'>s1</span><span class='p'>.</span><span class='n'>id</span><span class='p'>,</span> <span class='n'>s1</span><span class='p'>.</span><span class='n'>score1</span><span class='p'>,</span> <span class='n'>s1</span><span class='p'>.</span><span class='n'>score2</span><span class='p'>);</span>

	<span class='k'>struct</span> <span class='n'>student</span> <span class='n'>stu</span><span class='p'>[</span><span class='mi'>6</span><span class='p'>]</span> <span class='o'>=</span> <span class='p'>{</span>		<span class='c1'>//定义结构数组</span>
			<span class='p'>{</span><span class='s'>&quot;Lili&quot;</span><span class='p'>,</span> <span class='mi'>201001</span><span class='p'>,</span> <span class='mf'>5.5</span><span class='p'>,</span> <span class='mf'>6.6</span><span class='p'>},</span>
			<span class='p'>{</span><span class='s'>&quot;Lilk&quot;</span><span class='p'>,</span> <span class='mi'>201002</span><span class='p'>,</span> <span class='mf'>5.5</span><span class='p'>,</span> <span class='mf'>2.6</span><span class='p'>},</span>
			<span class='p'>{</span><span class='s'>&quot;Lile&quot;</span><span class='p'>,</span> <span class='mi'>201003</span><span class='p'>,</span> <span class='mf'>8.5</span><span class='p'>,</span> <span class='mf'>9.6</span><span class='p'>},</span>
			<span class='p'>{</span><span class='s'>&quot;Lils&quot;</span><span class='p'>,</span> <span class='mi'>201004</span><span class='p'>,</span> <span class='mf'>9.5</span><span class='p'>,</span> <span class='mf'>8.6</span><span class='p'>},</span>
			<span class='p'>{</span><span class='s'>&quot;Lilz&quot;</span><span class='p'>,</span> <span class='mi'>201005</span><span class='p'>,</span> <span class='mf'>3.5</span><span class='p'>,</span> <span class='mf'>2.6</span><span class='p'>},</span>
			<span class='p'>{</span><span class='s'>&quot;Lilw&quot;</span><span class='p'>,</span> <span class='mi'>201006</span><span class='p'>,</span> <span class='mf'>2.5</span><span class='p'>,</span> <span class='mf'>8.6</span><span class='p'>}</span>
							<span class='p'>};</span>
	<span class='kt'>int</span> <span class='n'>i</span><span class='p'>;</span>
	<span class='kt'>float</span> <span class='n'>aver1</span><span class='p'>,</span> <span class='n'>aver2</span><span class='p'>;</span>
	<span class='k'>for</span><span class='p'>(</span><span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>,</span> <span class='n'>aver1</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>,</span> <span class='n'>aver2</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span><span class='n'>i</span> <span class='o'>&lt;</span> <span class='mi'>6</span><span class='p'>;</span><span class='n'>i</span><span class='o'>++</span><span class='p'>){</span>
		<span class='n'>aver1</span> <span class='o'>+=</span> <span class='n'>stu</span><span class='p'>[</span><span class='n'>i</span><span class='p'>].</span><span class='n'>score1</span><span class='p'>;</span>		
		<span class='n'>aver2</span> <span class='o'>+=</span> <span class='n'>stu</span><span class='p'>[</span><span class='n'>i</span><span class='p'>].</span><span class='n'>score2</span><span class='p'>;</span>		
	<span class='p'>}</span>
	<span class='n'>aver1</span> <span class='o'>/=</span> <span class='mf'>6.0</span><span class='p'>;</span>
	<span class='n'>aver2</span> <span class='o'>/=</span> <span class='mf'>6.0</span><span class='p'>;</span>
	<span class='k'>for</span><span class='p'>(</span><span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span><span class='n'>i</span> <span class='o'>&lt;</span> <span class='mi'>6</span><span class='p'>;</span><span class='n'>i</span><span class='o'>++</span><span class='p'>){</span>
		<span class='n'>stu</span><span class='p'>[</span><span class='n'>i</span><span class='p'>].</span><span class='n'>score1</span> <span class='o'>-=</span> <span class='n'>aver1</span><span class='p'>;</span> 
		<span class='n'>stu</span><span class='p'>[</span><span class='n'>i</span><span class='p'>].</span><span class='n'>score2</span> <span class='o'>-=</span> <span class='n'>aver2</span><span class='p'>;</span>
	<span class='p'>}</span>
	<span class='k'>for</span><span class='p'>(</span><span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span><span class='n'>i</span> <span class='o'>&lt;</span> <span class='mi'>6</span><span class='p'>;</span><span class='n'>i</span><span class='o'>++</span><span class='p'>)</span>
		<span class='n'>printf</span><span class='p'>(</span><span class='s'>&quot;name:%s id:%d stucore:%f %f</span><span class='se'>\n</span><span class='s'>&quot;</span><span class='p'>,</span> <span class='n'>stu</span><span class='p'>[</span><span class='n'>i</span><span class='p'>].</span><span class='n'>name</span><span class='p'>,</span> <span class='n'>stu</span><span class='p'>[</span><span class='n'>i</span><span class='p'>].</span><span class='n'>id</span><span class='p'>,</span> <span class='n'>stu</span><span class='p'>[</span><span class='n'>i</span><span class='p'>].</span><span class='n'>score1</span><span class='p'>,</span> <span class='n'>stu</span><span class='p'>[</span><span class='n'>i</span><span class='p'>].</span><span class='n'>score2</span><span class='p'>);</span>
<span class='p'>}</span>
</code></pre></div><hr />
<h4 id='id42'>运算符</h4>

<p><img alt='sd' src='/img/c.png' /></p>

<h5 id='id43'>注意几点</h5>

<ul>
<li>1.位运算(&amp; | ^)符优先级<strong>高于</strong>逻辑运算符(&amp;&amp; || );</li>

<li>2.取模运算符(%) 的两个操作数都要是 <strong>整型</strong> ;</li>

<li>3.运算符用于构成表达式,<em>表达式产生值</em>;</li>

<li>4.赋值运算符(=),赋值表达式产生值，结合型自右向左;</li>

<li>5.函数调用也是表达式(上表不全),表达式产生值。</li>
</ul>
<hr />
<h4 id='id44'>函数(递归)</h4>

<blockquote>
<p>阶乘的计算。</p>
</blockquote>
<div class='highlight'><pre><code class='c'><span class='cp'>#include &lt;stdio.h&gt;</span>
	<span class='kt'>int</span> <span class='nf'>f</span><span class='p'>(</span><span class='kt'>int</span> <span class='n'>x</span><span class='p'>){</span>
		<span class='k'>if</span><span class='p'>(</span><span class='n'>x</span> <span class='o'>&lt;=</span> <span class='mi'>1</span><span class='p'>)</span> <span class='c1'>//递归返回边界</span>
			<span class='k'>return</span> <span class='mi'>1</span><span class='p'>;</span>
		<span class='k'>else</span> <span class='k'>return</span> <span class='n'>x</span> <span class='o'>*</span> <span class='n'>f</span><span class='p'>(</span><span class='n'>x</span> <span class='o'>-</span><span class='mi'>1</span><span class='p'>);</span>
	<span class='p'>}</span>
	<span class='kt'>int</span> <span class='nf'>main</span><span class='p'>()</span>
	<span class='p'>{</span>
		<span class='n'>printf</span><span class='p'>(</span><span class='s'>&quot;%d</span><span class='se'>\n</span><span class='s'>&quot;</span><span class='p'>,</span> <span class='n'>f</span><span class='p'>(</span><span class='mi'>6</span><span class='p'>));</span>
		<span class='k'>return</span> <span class='mi'>0</span><span class='p'>;</span>
	<span class='p'>}</span>
</code></pre></div>
<p>递归就是函数调用本身，递归一定有返回边界；</p>
<hr />
<h3 id='id45'>小结，有码有真相</h3>

<blockquote>
<p>写出求斐波那契数的函数fib(n)</p>
</blockquote>
<div class='highlight'><pre><code class='c'><span class='kt'>int</span> <span class='nf'>fib</span><span class='p'>(</span><span class='kt'>int</span> <span class='n'>n</span><span class='p'>){</span>
 	<span class='c1'>//-------</span>
<span class='p'>}</span>
</code></pre></div>
<p><a href='/HeadStream/Tutorial/How-to/2013/03/17/learningc3/index.html'>答案戳这里</a></p>

<p>下期将有<code>指针、宏、常用函数</code></p>

<p>PS:本来打算都写在这期的，结果太多了&#8230;</p>